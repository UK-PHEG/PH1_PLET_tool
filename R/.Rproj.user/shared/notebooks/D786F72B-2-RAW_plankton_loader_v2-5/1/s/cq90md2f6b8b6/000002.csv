"0","#work out a short dataset ID"
"0","df_abund <- df_abund %>%"
"0","  dplyr::mutate(cp=sub('-.*', '', contracting_party),"
"0","         inst=sub('\\).*', '', sub('.*\\(', '', contracting_party))) %>%"
"0","  arrange(cp, inst) %>%"
"0","  group_by(cp, inst) %>%"
"0","  dplyr::mutate(dset=as.numeric(factor(dataset_name))) %>%"
"0","  ungroup() %>%"
"0","  dplyr::mutate(data_id=paste(cp, inst, dset, sep=""-""))"
"0",""
"0","#save the dataset indices"
"0","df_datasets <- df_abund %>%"
"0","  dplyr::select(cp, inst, dset, data_id, contracting_party, dataset_name) %>%"
"0","  distinct() %>%"
"0","  bind_rows(data.frame(cp=""UK"","
"0","                       inst=""MBA"","
"0","                       dset=1,"
"0","                       data_id=""UK-MBA-1"","
"0","                       contracting_party=""UK-Marine Biologicical Association (MBA)"","
"0","                       dataset_name=""CPR dataset"")) %>%"
"0","  arrange(data_id)"
"0",""
"0","#save the datasets info dataframe"
"0","fwrite(df_datasets, file=paste0(dir_main, ""dataset_ids"", "".csv""))"
"0",""
"0","df_abund <- df_abund %>%"
"0","  dplyr::select(-cp, -inst, -dset)"
