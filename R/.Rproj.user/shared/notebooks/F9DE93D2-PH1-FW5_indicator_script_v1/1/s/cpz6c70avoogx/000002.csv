"0","#request the scientific naming information from WoRMS servers"
"0","df_wms <- load_worms(x=df_abund, dir=dir_main)"
"0",""
"0","#replace the taxon names provided with the dataset with consistent taxon names from WoRMS and aggregate by taxon"
"0","df_abund <- df_abund %>%"
"0","  left_join(data.frame(aphia_id=as.integer(df_wms$AphiaID), scientificname=df_wms$scientificname)) %>% # match the taxon names downloaded from WoRMS"
"0","  dplyr::mutate(scientificname = ifelse(is.na(scientificname), taxon, scientificname)) %>% # replace any NA scientific names with the old names"
"0","  dplyr::mutate(taxon = scientificname) %>%"
"0","  dplyr::select(-scientificname) %>%"
"0","  group_by(across(c(-abundance))) %>%"
"0","  dplyr::summarise(abundance = sum(abundance),"
"0","            .groups = ""drop"")"
"1","Joining, by = ""aphia_id""
"
"0","#remove WoRMS dataframe"
"0","rm(df_wms)"
